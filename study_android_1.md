# 2장 안드로이드 프로젝트 이해
## 안드로이드 앱 개발 특징
##### 안드로이드 특징
- 안드로이드는 공개 운영체제인 리눅스 기반이다
- 앱개발은 자바 및 코틀린을 이용해 개발한다
- 운영체제의 핵심 코드, 라이브러리 코드, 구글 기본 앱 등 대부분의 코드가 오픈되어 있다
- 안드로이드 플랫폼 기반읜 스마트폰을 여러 제조업체에서 만들 수 있다
- 개발자가 만든 앱은 구글 Play 스토어 뿐만 아니라 다양한 방법으로 사용자에게 배포할 수 있다
- 안드로이드 기반의 모든 애플리케이션은 평등하다는 사상으로 스마트폰에 기본 탑재된 앱과 개발자들이 만드는 앱이 같은 환경에서 같은 API를 이용한다
- 멀티태스킹 지원 (iOS는 지원 안함) 여러 플세스가 동시에 동작 가능
- 단점은 기기의 파편화 > 많은 테스트 필요

## 안드로이드 플랫폼 아키텍처
##### 안드로이드 아키텍처
- HAL(Hardware Abstraction Layer) 자바 API 프레임워크에 하드웨어 기능을 이용하는 표준 인터페이스 제공 > 자바 API 프레임워크에서 하드웨어 기기(블루투스, 카메라 등)를 이용하기 위한 코드가 실행되면 내부적으로 HAL의 라이브러리 모듈이 로딩되어 처리함
- 안드로이드 런타임은 ART 가상 머신을 이용함 > ART 가상 머신 위에 일반 애플리케이션 개발시 이용할 수 있는 자바 API 프레임워크를 제공함


##### 안드로이드 런타임(Dalvik > ART)
- 안드로이드의 VM은 ART(Android Runtime)을 이용 (JVM 아님!)
- ART(API Level 21부터), Dalvik(API Level 21 이전)
- 해석 순서 : Java Source(.java) > Java Byte Code(.class) > Dalvik Byte Code(.dex) > Dex파일(ART가 해석하여 수행)


##### 애플리케이션 프레임워크(= 자바 API 프레임워크)
- 안드로이드 앱을 만들때 이용하는 표준 라이브러리
- UI 구성에 쓰이는 View 클래스, 리소스 관리, 데이터 영속화 등의 기능 제공
- 하위의 커널이나 시스템 라이브러리를 직접 이용할 필요 없이, 자바 API 프레임워크에서 제공하는 클래스를 이용하여 앱의 모든 기능을 구현할 수 있다

## 컴포넌트 기반 개발
##### 컴포넌트 란?
- 안드로이드 앱의 아키텍처에서 가장 큰 특징은 "컴포넌트 기반" 이라는 것이다
- 앱의 구성 단위이며, 여러개의 컴포넌트를 조합하여 하나의 앱을 만든다
- 컴포넌트의 물리적인 모습은 "클래스" 이다
- 안드로이드에서 클래스는 컴포넌트 와 일반 클래스로 나뉜다, 둘의 차이점은 클래스의 생명주기를 누가 관리하는지에 있다
- 일반 클래스는 개발자 코드로 생성하여 관리하며, 이에 반해 컴포넌트의 생명주기는 안드로이드 시스템이 생성하여 관리한다
- 컴포넌트는 앱 내에서 독립적인 실행 단위이다(느슨한 결합도)
- 컴포넌트가 다른 컴포넌트를 실행할 때 개발자 코드에서 new연산자를 이용하여 생성할 수 없다, 대신 인텐트(Intent)라는 매개를 이용하여 결합하지 않은 상태에서 독립적으로 실행하는 구조이다
- A컴포넌트는 B컴포넌트의 실행을 "시스템"에 의뢰하고 "시스템"에서 B컴포넌트를 실행한다, 따라서 직접 결합이 발생하지 않는 구조이다
- main 함수 같은 애플리케이션의 진입 지점이 따로 없다, 컴포넌트가 앱 내에서 각각 독립적인 단위로 수행될 수 있기 때문이다, 즉 앱의 수행 시점은 다양할 수 있다
- 애플리케이션 라이브러리 개념이 있다, 다른 앱의 기능을 내 앱에 활용할 수 있다

##### 컴포넌트 종류 4가지
- 액티비티 : UI를 구성하기 위한 컴포넌트
- 서비스 : UI 없이 백그라운드에서 장시간 수행되는 컴포넌트
- 콘텐츠 프로바이더 : 애플리케이션 간 데이터를 공유하기 위한 컴포넌트
- 브로드캐스트 리시버 : 이벤트 모델로 수행되는 컴포넌트

## 리소스를 이용한 개발
##### 리소스 외부화 개발
- 코드영역에 누가 언제 실행하든 항상 같은 결과가 나오는 정적인(static) 콘텐츠를 코드에서 분리하여 개발 하는 것을 의미함
- 유지보수에 뛰어남
- 정적인 부분은 자바 코드에서 개발하지 않고 별도의 리소스 파일로 작성하고, 코드에서는 리소스를 얻어서 사용함으로써 유지보수성을 높이자는 개념이다
- 안드로이드에서 리소스 파일은 대부분 XML파일이다

## 개발 디렉터리와 파일 구조
##### 디렉터리와 파일의 역할
- AndroidManifest.xml : 앱의 메인 환경 파일
- java/xxxActivity.java : 화면 구성을 위한 액티비티 컴포넌트, 화면에 UI 출력
- res : 앱의 모든 리소스 파일은 res 폴더 하위에 위치함
- res/drawable : 리소스 중 이미지 파일을 저장하기 위한 폴더
- res/layout : 리소스 중 UI 구성을 위한 레이아웃 XML 파일을 위한 폴더
- res/mipmap : 리소스 중 앱의 아이콘 이미지를 위한 폴더
- res/values : 리소스 중 문자열 값 등을 위한 폴더

##### R.java의 이해
- 모든 리소스 파일은 res 폴더 하위에 위치해야한다
- res 하위의 폴더는 이름이 지정되어 있으며, 개발자가 임의로 이름을 추가할 수 없다, 또한 각 폴더의 서브 폴더를 만들 수 없다
- 수백 개의 리소스를 식별하게 도와주는 파일이 "R.java" 이다
- 툴이 자동으로 만들어주며, res 밑에 하나의 리소스 파일을 추가하면 해당 파일명으로 된 int 형 변수가 R.java에 자동으로 추가된다, 그리고 자바 코드에서 이 변수로 리소스를 지칭해서 사용하는 구조이다

## 그레이들(gradle) 파일(= 안드로이드의 빌드도구)
##### 그레이들 이란?
- 배포하기 위한 빌드 작업을 해주는 빌드 도구(APK 생성)
- 그레이들 파일은 크게 "프로젝트 수준"과 "모듈 수준"으로 구분된다
- 안드로이드 스튜디오에서는 앱이 모듈 단위이며, 여러 모듈을 묶어서 관리하기 위한 개념이 프로젝트 개념이다
- 프로젝트 수준의 그레이들 파일은 전체 프로젝트를 위한 설정 파일이다
- 모듈 수준의 그레이들 파일은 각 모듈을 위한 설정 파일이다, 즉 모듈 하나당 하나의 그레이들 파일이 만들어 진다

##### settings.gradle
- 그레이들에 모듈을 포함하여 그레이들이 모듈을 관리하고 빌드하게 설정하는 파일
- 모듈을 만들 때마다 모듈명이 자동으로 settings.gradle에 포함되므로 개발자가 직접 조정하는 일은 거의 없다

##### 프로젝트 수준의 그레이들
- 모든 모듈을 위한 최상위 설정을 목적으로 함
- 대부분 모듈 수준의 그레이들 파일 설정이 이루어지므로 프로젝트 수준의 그레이들 파일 설정은 빈번하지 않다
- 그나마 dependencies 부분에 라이브러리를 추가하는 정도이다

##### 모듈 수준의 그레이들
- 모듈 수준의 그레이들의 설정은 모듈을 개발하고 빌드할 때 중요한 역할을 함
- compileSdkVersion : 사용하는 컴파일러 버전
- applicationId : 앱의 식별자(구글 Play스토어에 이미 있으면 안됨! 유일무이할것)
- minSdkVersion : 최소 지원 범위
- targetSdkVersion : 사용하고 있는 SDK 버전(개발시 이용하고 있는 라이브러리 버전)
- versionCode : 앱의 버전
- dependencies : 앱을 위한 라이브러리 등록

##### AndroidManifest.xml
- package : 앱의 식별자 정보(= applicationId)
- application 태그 : 앱의 구성요소를 등록하기 위한 태그, 컴포넌트 클래스들을 이 태그의 하위 태그로 등록한다
- android.icon : 앱의 아이콘 이미지
- android.lavel : 앱의 이름
- activity 태그 : 앱에 액티비티 컴포넌트를 등록하기 위한 태그, name속성은 생략 불가능, 그 외 service, provider, receiver 태그가 있다

##### 안드로이드 버전
| 코드네임 | API 레벨 |
| :------------- | :------------- |
| Icecream Sandwich | 14 ~ 15 |
| Jelly Bean | 16 ~ 18 |
| KitKat | 19 ~ 20 |
| Lollipop | 21 ~ 22 |
| mashmallow | 23 |
| nougat | 24 ~ 25 |
| Oreo | 26 |
